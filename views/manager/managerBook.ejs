<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Book Store</title>
  <!-- Link to external CSS file -->
  <link rel="stylesheet" href="/style.css">
</head>
<body>

    <%- include('nav.ejs') %>


    <div class="container">
        <h1>book List</h1>
        <form action="/book/add" method="POST" enctype="multipart/form-data" class="product-form-2">
            <input type="text" name="title" placeholder="Title" class="product-input">
            <input type="text" name="authorName" placeholder="authorName" class="product-input">
            <input type="text" name="genreName" placeholder="genreName" class="product-input">
            <input type="text" name="ISBN" placeholder="ISBN" class="product-input">
            <input type="date" name="publicationDate" placeholder="publicationDate" class="product-input">
            <input type="number" name="price" placeholder="price" class="product-input">
            <input type="number" name="stockQuantity" stockQuantity="ISBN" class="product-input">

            <input type="file" name="image" accept="image/*" class="product-input">
            <button type="submit" class="button">Add product</button>
          </form>
        <ul class="product-list">
          <% books.forEach(book => { %>
            <li class="product-item">
              <div class="product-details">
                <% if (book.image) { %>
                    <img src="/<%= book.image %>" alt="Image du book" class="product-image">
                <% } %>
                <div class="product-info">
                  <h3 class="product-title"><%= book.title %></h3>
                </div>
              </div>
                <div> 
          <form id="genreForm" action="/book/update/<%= book._id %>" method="POST" class="product-form">
            <input type="text" name="title" value="<%= book.title %>" placeholder="title" class="product-input">
            <input type="text" name="authorName" value="<%= book.author %>" placeholder="authorName" class="product-input">
            <input type="text" name="genreName" value="<%= book.genre %>" placeholder="genreName" class="product-input">
            <input type="text" name="ISBN" value="<%= book.ISBN %>" placeholder="ISBN" class="product-input">
            <input type="text" name="publicationDate" value="<%= book.publicationDate %>" placeholder="publicationDate" class="product-input">
            <input type="text" name="price" value="<%= book.price %>" placeholder="price" class="product-input">
            <input type="text" name="stockQuantity" value="<%= book.stockQuantity %>" placeholder="stockQuantity" class="product-input">
            






            <button type="submit" class="button">Modify</button>
            <button type="button" class="delete-button" onclick="deleteBook('<%= book._id %>')">Delete</button>
        </form>
                </div>
              
              
            </li>
          <% }); %>
          
        
        
        <script>
            function deleteBook(genreId) {
                if (confirm("Are you sure you want to delete this genre?")) {
                    fetch("/book/delete/" + genreId, {
                        method: "DELETE"
                    })
                    .then(response => {
                        // Handle response as needed
                        // For example, you could redirect after successful deletion
                        if (response.ok) {
                            window.location.reload;
                        } else {
                            // Handle error
                            console.error("Error deleting genre");
                        }
                    })
                    .catch(error => {
                        console.error("Error deleting genre:", error);
                    });
                }
            }
        </script>
        
        </ul>
      
       




</div>
 

</body>
</html>
